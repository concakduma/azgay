-- Invisible Toggle Script
-- GUI for Minecraft
-- Version: 1.1 (Added minimize feature)

-- Create GUI Elements
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local TitleBar = Instance.new("TextLabel")
local MinButton = Instance.new("TextButton")
local ToggleButton = Instance.new("TextButton")

-- Configure ScreenGui
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false
print("GUI loaded successfully!")

-- Configure Main Frame
Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(196, 40, 28)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.584, 0, 0.122, 0)
Frame.Size = UDim2.new(0, 173, 0, 105)
Frame.Active = true
Frame.Draggable = true

-- Configure Title Bar
TitleBar.Parent = Frame
TitleBar.BackgroundColor3 = Color3.fromRGB(13, 105, 172)
TitleBar.BorderSizePixel = 0
TitleBar.Size = UDim2.new(0, 173, 0, 30)
TitleBar.Font = Enum.Font.SourceSansBold
TitleBar.Text = "Invisible Toggle"
TitleBar.TextColor3 = Color3.fromRGB(245, 205, 48)
TitleBar.TextSize = 18

-- Configure Minimize Button
MinButton.Parent = TitleBar
MinButton.BackgroundTransparency = 1
MinButton.Text = "-"
MinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinButton.TextSize = 20
MinButton.Size = UDim2.new(0, 25, 0, 25)
MinButton.Position = UDim2.new(0.85, 0, 0.05, 0)
MinButton.BorderSizePixel = 0

-- Configure Toggle Button
ToggleButton.Parent = Frame
ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.BorderSizePixel = 0
ToggleButton.Position = UDim2.new(0.162, 0, 0.419, 0)
ToggleButton.Size = UDim2.new(0, 117, 0, 33)
ToggleButton.Font = Enum.Font.SourceSans
ToggleButton.Text = "Click to become invisible"
ToggleButton.TextColor3 = Color3.fromRGB(0, 0, 0)
ToggleButton.TextSize = 14

-- Minimize/Expand functionality
local isMinimized = false
local originalSize = Frame.Size

local function toggleMinimize()
    isMinimized = not isMinimized
    
    if isMinimized then
        Frame.Size = UDim2.new(originalSize.X.Scale, originalSize.X.Offset, 0, 30)
        MinButton.Text = "+"
        ToggleButton.Visible = false
    else
        Frame.Size = originalSize
        MinButton.Text = "-"
        ToggleButton.Visible = true
    end
end

MinButton.MouseButton1Click:Connect(toggleMinimize)

-- Toggle Button Functionality
local function setupToggleButton()
    local isInvisible = false
    
    local function updateTransparency(character)
        for _, part in ipairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.LocalTransparencyModifier = isInvisible and 0.5 or 0
            end
        end
    end
    
    local function toggleInvisibility()
        isInvisible = not isInvisible
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        
        if isInvisible then
            -- Save position and move to secret location
            local savedPosition = character.HumanoidRootPart.CFrame
            character:MoveTo(Vector3.new(-25.95, 84, 3537.55))
            
            -- Create invisible seat
            local seat = Instance.new("Seat")
            seat.Name = "invischair"
            seat.Anchored = false
            seat.CanCollide = false
            seat.Transparency = 1
            seat.Position = Vector3.new(-25.95, 84, 3537.55)
            seat.Parent = workspace
            
            -- Weld character to seat
            local weld = Instance.new("Weld")
            weld.Part0 = seat
            weld.Part1 = character:FindFirstChild("Torso") or character:FindFirstChild("UpperTorso")
            weld.Parent = seat
            
            -- Return to original position
            seat.CFrame = savedPosition
            ToggleButton.Text = "ONüõ°Ô∏è"
        else
            -- Remove invisibility seat if exists
            local seat = workspace:FindFirstChild("invischair")
            if seat then seat:Destroy() end
            ToggleButton.Text = "OFFüõë"
        end
        
        updateTransparency(character)
    end
    
    ToggleButton.MouseButton1Click:Connect(toggleInvisibility)
    
    -- Handle new characters
    game.Players.LocalPlayer.CharacterAdded:Connect(function(character)
        updateTransparency(character)
    end)
    
    -- Send notification
    task.wait(0.69)
    game.StarterGui:SetCore("SendNotification", {
        Title = "Loaded",
        Text = "Invisibility toggle ready!",
        Duration = 6
    })
end

-- Initialize the button functionality
coroutine.wrap(setupToggleButton)()
